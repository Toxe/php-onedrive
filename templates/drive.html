<ul class="breadcrumbs">
    <li><a href="/drive"><img src="/img/home.svg" /></a></li>
    <li><a href="/drive">Drive</a></li>
    {% for bc in breadcrumbs[1:] %}
    <li><img src="/img/right_arrow.svg" /></li>
    <li><a href="{{ bc.url}}">{{ bc.name }}</a></li>
    {% endfor %}
</ul>

<table class="files">
    <thead>
        <tr>
            <th scope="col"></th>
            <th scope="col">Name</th>
            <th scope="col">Size</th>
            <th scope="col">Modified</th>
            <th scope="col"></th>
        </tr>
    </thead>
    <tbody>
        {% if breadcrumbs|length > 1 %}
        {% set parent = breadcrumbs[-2:-1][0] %}
        <tr>
            <td><a href="{{ parent.url }}"><img src="/img/up_arrow.svg" /></a></td>
            <td class="up"><a href="{{ parent.url }}">..</a></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        {% endif %}
        {% for file in files %}
        <tr>
            <td><a href="{{ file.url }}"><img src="/img/{{ file.type }}.svg" /></a></td>
            <td><a href="{{ file.url }}">{{ file.name }} ({{ file.id }})</a></td>
            <td>{{ file.size }}</td>
            <td class="modified">{{ file.modified }}</td>
            <td><button onclick="show_rename_dialog('{{ file.id}}', '{{ file.name }}')">Rename</button></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<dialog id="rename_dialog">
    <form method="post">
        <p>Please enter the new name.</p>
        <p>
            <input type="text" name="new_name" size="40" autofocus />
            <input type="hidden" name="item_id" />
        </p>
        <div>
            <button type="submit" name="action" value="rename">Submit</button>
            <button value="cancel" formmethod="dialog">Cancel</button>
        </div>
    </form>
</dialog>
